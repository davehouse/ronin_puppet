cacheOverRestarts: true
getSecrets: false
provider:
    providerType: standalone
    rootURL: "https://firefox-ci-tc.services.mozilla.com"
    clientID: "<%= @taskcluster_client_id %>"
    accessToken: "<%= @taskcluster_access_token %>"
    workerPoolID: "releng-hardware/<%= @worker_type %>"
    workerGroup: "<%= @worker_group %>"
    workerID: "<%= @worker_id ? @worker_id : @facts['ec2_metadata']['instance-id'] -%>"
worker:
    implementation: generic-worker
    path: /usr/local/bin/generic-worker
    configPath: /home/cltbld/generic-worker.config
workerConfig:
    cachesDir:                        "<%= @caches_dir %>"
    certificate:                      ""
    checkForNewDeploymentEverySecs:   0
    cleanUpTaskDirs:                  true
    ed25519SigningKeyLocation:        "<%= @ed25519_signing_key %>"
    idleTimeoutSecs:                  600
    livelogExecutable:                "/usr/local/bin/livelog"
    numberOfTasksToRun:               0
    provisionerId:                    "releng-hardware"
    publicIP:                         "<%= @facts['ec2_metadata']['public-ipv4'] -%>"
    requiredDiskSpaceMegabytes:       20240
    sentryProject:                    "generic-worker"
    shutdownMachineOnIdle:            true
    shutdownMachineOnInternalError:   false
    taskclusterProxyExecutable:       "/usr/local/bin/taskcluster-proxy"
    taskclusterProxyPort:             8080
    tasksDir:                         "<%= @task_dir %>"
    workerId:                         "<%= @worker_id ? @worker_id : @facts['ec2_metadata']['instance-id'] -%>"
    workerGroup:                      "<%= @worker_group %>"
    workerType:                       "<%= @worker_type %>"
    wstAudience:                      "firefoxcitc"
    wstServerURL:                     "https://firefoxci-websocktunnel.services.mozilla.com/"
    workerTypeMetadata:
        instance_type:                "<%= @facts['ec2_metadata']['instance-type'] -%>"
        region:                       "<%= @facts['ec2_metadata']['placement']['region'] -%>"
        ami:                          "<%= @facts['ec2_metadata']['ami-id'] -%>"
        instance_life_cycle:          "<%= @facts['ec2_metadata']['instance-life-cycle'] -%>"
